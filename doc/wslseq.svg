<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="443px" preserveAspectRatio="none" style="width:894px;height:443px;" version="1.1" viewBox="0 0 894 443" width="894px" zoomAndPan="magnify"><defs><filter height="300%" id="f5rhsrl1k0nqm" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="421.3926" style="stroke: #A80036; stroke-width: 1.0;" width="195" x="4" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="189" x="7" y="16.5684">Originating Process Context</text><rect fill="#DDDDDD" height="421.3926" style="stroke: #A80036; stroke-width: 1.0;" width="605.5" x="252" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186" x="461.75" y="16.5684">File System Process Context</text><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="21.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="60" y="85.2871"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="9" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="60" y="413.3926"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="149.5" y="106.5977"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="282.5" y="135.9082"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="282.5" y="384.082"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="479.5" y="165.2188"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="479.5" y="354.7715"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="685.5" y="194.5293"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="685.5" y="325.4609"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="101.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="812.5" y="223.8398"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="817.5" y="261.1504"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="65" x2="65" y1="75.2871" y2="431.3926"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="154" x2="154" y1="75.2871" y2="431.3926"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="287" x2="287" y1="75.2871" y2="431.3926"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="484" x2="484" y1="75.2871" y2="431.3926"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="690" x2="690" y1="75.2871" y2="431.3926"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="817.5" x2="817.5" y1="75.2871" y2="431.3926"/><rect fill="#FEFECE" filter="url(#f5rhsrl1k0nqm)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="17" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="24" y="43.8457">Originating</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="37" y="60.334">Process</text><rect fill="#FEFECE" filter="url(#f5rhsrl1k0nqm)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="59" x="123" y="39.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="130" y="60.334">winfsp</text><rect fill="#FEFECE" filter="url(#f5rhsrl1k0nqm)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="59" x="256" y="39.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="45" x="263" y="60.334">winfsp</text><rect fill="#FA8072" filter="url(#f5rhsrl1k0nqm)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="449" y="39.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="456" y="60.334">winfuse</text><rect fill="#FA8072" filter="url(#f5rhsrl1k0nqm)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="65" x="656" y="39.7988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="51" x="663" y="60.334">wslfuse</text><rect fill="#FEFECE" filter="url(#f5rhsrl1k0nqm)" height="46.9766" style="stroke: #A80036; stroke-width: 1.5;" width="68" x="781.5" y="23.3105"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="796.5" y="43.8457">Linux</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="54" x="788.5" y="60.334">FUSE FS</text><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="21.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="60" y="85.2871"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="9" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="60" y="413.3926"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="149.5" y="106.5977"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="282.5" y="135.9082"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="282.5" y="384.082"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="479.5" y="165.2188"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="479.5" y="354.7715"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="685.5" y="194.5293"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="685.5" y="325.4609"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="101.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="812.5" y="223.8398"/><rect fill="#FFFFFF" filter="url(#f5rhsrl1k0nqm)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="817.5" y="261.1504"/><polygon fill="#A80036" points="137.5,102.5977,147.5,106.5977,137.5,110.5977,141.5,106.5977" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="65" x2="143.5" y1="106.5977" y2="106.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="72" y="101.8555">I/O</text><polygon fill="#A80036" points="270.5,131.9082,280.5,135.9082,270.5,139.9082,274.5,135.9082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="154.5" x2="276.5" y1="135.9082" y2="135.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="161.5" y="131.166">Context Switch</text><polygon fill="#A80036" points="467.5,161.2188,477.5,165.2188,467.5,169.2188,471.5,165.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="287.5" x2="473.5" y1="165.2188" y2="165.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="294.5" y="160.4766">FSP_FSCTL_TRANSACT Req</text><polygon fill="#A80036" points="673.5,190.5293,683.5,194.5293,673.5,198.5293,677.5,194.5293" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="484.5" x2="679.5" y1="194.5293" y2="194.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="491.5" y="189.7871">FUSE_FSCTL_TRANSACT Req</text><polygon fill="#A80036" points="800.5,219.8398,810.5,223.8398,800.5,227.8398,804.5,223.8398" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="690.5" x2="806.5" y1="223.8398" y2="223.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="697.5" y="219.0977">/dev/fuse read</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="827.5" x2="869.5" y1="253.1504" y2="253.1504"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="869.5" x2="869.5" y1="253.1504" y2="266.1504"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="828.5" x2="869.5" y1="266.1504" y2="266.1504"/><polygon fill="#A80036" points="838.5,262.1504,828.5,266.1504,838.5,270.1504,834.5,266.1504" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="834.5" y="248.4082">Process</text><polygon fill="#A80036" points="706.5,321.4609,696.5,325.4609,706.5,329.4609,702.5,325.4609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="700.5" x2="816.5" y1="325.4609" y2="325.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="712.5" y="320.7188">/dev/fuse write</text><polygon fill="#A80036" points="500.5,350.7715,490.5,354.7715,500.5,358.7715,496.5,354.7715" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="689.5" y1="354.7715" y2="354.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="506.5" y="350.0293">FUSE_FSCTL_TRANSACT Rsp</text><polygon fill="#A80036" points="303.5,380.082,293.5,384.082,303.5,388.082,299.5,384.082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="297.5" x2="483.5" y1="384.082" y2="384.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="309.5" y="379.3398">FSP_FSCTL_TRANSACT Rsp</text><polygon fill="#A80036" points="81,409.3926,71,413.3926,81,417.3926,77,413.3926" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="75" x2="286.5" y1="413.3926" y2="413.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="87" y="408.6504">Context Switch and Return</text><!--
@startuml
hide footbox

box "Originating Process Context"
    participant "Originating\nProcess" as OP
    participant "winfsp" as winfspOP
end box
box "File System Process Context"
    participant "winfsp" as winfspFS
    participant winfuse #Salmon
    participant wslfuse #Salmon
    participant "Linux\nFUSE FS" as FS
end box

activate OP
OP->winfspOP: I/O
deactivate OP
activate winfspOP
winfspOP- ->winfspFS: Context Switch
deactivate winfspOP
activate winfspFS
winfspFS->winfuse: FSP_FSCTL_TRANSACT Req
deactivate winfspFS
activate winfuse
winfuse->wslfuse: FUSE_FSCTL_TRANSACT Req
deactivate winfuse
activate wslfuse
wslfuse->FS: /dev/fuse read
deactivate wslfuse
activate FS
FS->FS: Process
activate FS
deactivate FS
FS->wslfuse: /dev/fuse write
deactivate FS
activate wslfuse
wslfuse->winfuse: FUSE_FSCTL_TRANSACT Rsp
deactivate wslfuse
activate winfuse
winfuse->winfspFS: FSP_FSCTL_TRANSACT Rsp
deactivate winfuse
activate winfspFS
winfspFS- ->OP: Context Switch and Return
deactivate winfspFS
activate OP

@enduml

PlantUML version 1.2019.09(Mon Aug 26 09:19:51 PDT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 11.0.2+9-LTS
Operating System: Mac OS X
OS Version: 10.14.6
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>